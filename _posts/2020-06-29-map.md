---
layout:     post
title:      "[Dataframe]—如何批量修改某列的值"
subtitle:   "map"
date:       2020-06-29 17:00:00
author:     "Meng"
header-img: "https://tva1.sinaimg.cn/large/007S8ZIlly1gg9a90154uj31900u0tdg.jpg"
catalog: false
tags:
    - python
	- pandas
	- 小工具
---



#### 准备

```python
import pandas as pd 
tmp_file = pd.read_csv('.../test_for_map.csv')
```

![tmp_file](https://tva1.sinaimg.cn/large/007S8ZIlly1gg9a5zzcz1j306o0b80t3.jpg)



#### 原来的做法:

```python
for i in range(len(train_resample_test['不良种类'])):   
    if train_resample_test['不良种类'][i] == '不良13':
        train_resample_test['不良种类'][i] = 1
    else:
        train_resample_test['不良种类'][i] = 0
```

缺点:

- 慢

- 出现warning:

  >SettingWithCopyWarning: 
  >A value is trying to be set on a copy of a slice from a DataFrame

#### 使用map:

```python
tmp_file = tmp_file.rename(columns={'类别': 'Category'})
train_resample['Category'] = train_resample.Category.map(lambda x: 0 if x ==0 else 1)
```

![changed_file](https://tva1.sinaimg.cn/large/007S8ZIlly1gg9a6dm6cbj307e0ag74g.jpg)

